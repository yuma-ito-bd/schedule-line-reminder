# 2. Google Calendar API拡張

## 概要
現在は`primary`カレンダーのみに対応している機能を、複数のカレンダーからイベントを取得できるように拡張する。カレンダーリスト取得機能と複数カレンダーからの並列イベント取得機能を実装する。

## タスク詳細

### 2.1 カレンダーリスト取得機能追加
- **優先度**: High
- **工数**: 2時間
- **内容**:
  - `GoogleCalendarApiAdapter`に`fetchCalendarList()`メソッド追加
  - Google Calendar APIの`calendarList.list`エンドポイント利用
  - カレンダー名、ID、アクセスレベルの取得

### 2.2 複数カレンダーからのイベント取得機能
- **優先度**: High
- **工数**: 3-4時間  
- **内容**:
  - `CalendarEventsNotifier`のリファクタリング
  - 複数カレンダーIDからの並列イベント取得
  - イベントのマージとソート処理
  - エラーハンドリング（一部カレンダーが取得失敗でも継続）

## 技術的考慮事項

### パフォーマンス
- **並列処理**: 複数カレンダーの並列取得によるレスポンス時間最適化
- **エラーハンドリング**: 一部カレンダーでエラーが発生しても、他のカレンダーのイベントは取得継続
- **レート制限対策**: Google Calendar API Rate Limit対策

### イベント処理
- **重複除去**: 同じイベントが複数カレンダーに存在する場合の重複除去
- **時系列ソート**: 複数カレンダーからのイベントの統合と時系列ソート
- **権限管理**: カレンダーアクセス権限の適切な管理

### API仕様
- **calendarList.list**: ユーザーがアクセス可能なカレンダーリストを取得
- **events.list**: 各カレンダーからイベントリストを取得
- **OAuth2スコープ**: 必要な権限スコープの確認

## 関連ファイル
- `src/adapters/google-calendar-api-adapter.ts` - API アダプタークラス
- `src/use-cases/calendar-events-notifier.ts` - イベント通知ロジック
- `src/types/google-calendar.d.ts` - 型定義